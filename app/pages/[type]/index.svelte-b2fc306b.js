import{S as t,i as e,s,j as r,k as n,e as o,m as l,n as a,c as i,a as c,d as f,b as m,o as h,f as p,F as u,v as g,t as $,g as d,h as y,r as w,w as v,u as j,Q as b,l as x,T as k,z as E,B as A}from"../../chunks/vendor-397bb9c3.js";import{g as P}from"../../chunks/navigation-20968cc5.js";import{p as N}from"../../chunks/stores-c81ade89.js";import{T as S}from"../../chunks/Title-284aae4c.js";import{H as B}from"../../chunks/Head-90633793.js";import{P as D}from"../../chunks/Profiles-756600fa.js";import{E as I}from"../../chunks/EzeMedia-65776d11.js";import{u as M}from"../../chunks/utils-852b04f8.js";import"../../chunks/singletons-bb9012b7.js";import"../../chunks/_stores-92e85fc2.js";function O(t,e,s){const r=t.slice();return r[8]=e[s][0],r[9]=e[s][1],r[11]=s,r}function T(t,e,s){const r=t.slice();return r[12]=e[s],r[11]=s,r}function V(t,e,s){const r=t.slice();return r[14]=e[s],r}function z(t){let e,s=t[8]+"";return{c(){e=$(s)},l(t){e=d(t,s)},m(t,s){p(t,e,s)},p(t,r){4&r&&s!==(s=t[8]+"")&&y(e,s)},d(t){t&&f(e)}}}function C(t){var e,s;let j,b,x,k,E,A,P,N,S,B,D,O,T,V,z=t[14].name+"";return k=new I({props:{class:"",file:null==(s=null==(e=t[14])?void 0:e.picture)?void 0:s[0],root:t[3],format:"300x0x90",stretch:"width"}}),{c(){j=o("a"),b=o("span"),x=n(),r(k.$$.fragment),E=n(),A=o("span"),P=n(),N=o("span"),S=$(z),O=n(),T=o("div"),this.h()},l(t){j=i(t,"A",{href:!0,class:!0});var e=c(j);b=i(e,"SPAN",{class:!0}),c(b).forEach(f),x=a(e),l(k.$$.fragment,e),E=a(e),A=i(e,"SPAN",{class:!0}),c(A).forEach(f),P=a(e),N=i(e,"SPAN",{class:!0});var s=c(N);S=d(s,z),s.forEach(f),e.forEach(f),O=a(t),T=i(t,"DIV",{class:!0}),c(T).forEach(f),this.h()},h(){m(b,"class","grow"),m(A,"class","grow"),m(N,"class","p1 border mt1"),m(j,"href",B=`/${t[14].type}/${t[14].id}`),m(j,"class",D="no-basis mb1 grow flex column-stretch-flex-start wrap profile-"+t[14].type+" profile-"+t[14]["picture-style"]+" "+M.slugify(t[14].name)),m(T,"class","flex w1em maxe1em")},m(t,e){p(t,j,e),u(j,b),u(j,x),h(k,j,null),u(j,E),u(j,A),u(j,P),u(j,N),u(N,S),p(t,O,e),p(t,T,e),V=!0},p(t,e){var s,r;const n={};4&e&&(n.file=null==(r=null==(s=t[14])?void 0:s.picture)?void 0:r[0]),8&e&&(n.root=t[3]),k.$set(n),(!V||4&e)&&z!==(z=t[14].name+"")&&y(S,z),(!V||4&e&&B!==(B=`/${t[14].type}/${t[14].id}`))&&m(j,"href",B),(!V||4&e&&D!==(D="no-basis mb1 grow flex column-stretch-flex-start wrap profile-"+t[14].type+" profile-"+t[14]["picture-style"]+" "+M.slugify(t[14].name)))&&m(j,"class",D)},i(t){V||(g(k.$$.fragment,t),V=!0)},o(t){w(k.$$.fragment,t),V=!1},d(t){t&&f(j),v(k),t&&f(O),t&&f(T)}}}function H(t){let e;return{c(){e=o("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),c(e).forEach(f),this.h()},h(){m(e,"class","no-basis grow")},m(t,s){p(t,e,s)},d(t){t&&f(e)}}}function F(t){let e,s,$,d,y,x;e=new S({props:{$$slots:{default:[z]},$$scope:{ctx:t}}});let k=t[9].items,E=[];for(let r=0;r<k.length;r+=1)E[r]=C(V(t,k,r));const P=t=>w(E[t],1,1,(()=>{E[t]=null}));let N=new Array(6-t[9].items.length),B=[];for(let r=0;r<N.length;r+=1)B[r]=H(T(t,N,r));return{c(){r(e.$$.fragment),s=n(),$=o("div");for(let t=0;t<E.length;t+=1)E[t].c();d=n();for(let t=0;t<B.length;t+=1)B[t].c();y=n(),this.h()},l(t){l(e.$$.fragment,t),s=a(t),$=i(t,"DIV",{class:!0});var r=c($);for(let e=0;e<E.length;e+=1)E[e].l(r);d=a(r);for(let e=0;e<B.length;e+=1)B[e].l(r);y=a(r),r.forEach(f),this.h()},h(){m($,"class","flex row wrap mtb1")},m(t,r){h(e,t,r),p(t,s,r),p(t,$,r);for(let e=0;e<E.length;e+=1)E[e].m($,null);u($,d);for(let e=0;e<B.length;e+=1)B[e].m($,null);u($,y),x=!0},p(t,s){const r={};if(131076&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r),12&s){let e;for(k=t[9].items,e=0;e<k.length;e+=1){const r=V(t,k,e);E[e]?(E[e].p(r,s),g(E[e],1)):(E[e]=C(r),E[e].c(),g(E[e],1),E[e].m($,d))}for(A(),e=k.length;e<E.length;e+=1)P(e);j()}if(4&s){const e=N.length;let s;for(N=new Array(6-t[9].items.length),s=e;s<N.length;s+=1)T(t,N,s),B[s]||(B[s]=H(),B[s].c(),B[s].m($,y));for(s=N.length;s<e;s+=1)B[s].d(1);B.length=N.length}},i(t){if(!x){g(e.$$.fragment,t);for(let t=0;t<k.length;t+=1)g(E[t]);x=!0}},o(t){w(e.$$.fragment,t),E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)w(E[e]);x=!1},d(t){v(e,t),t&&f(s),t&&f($),b(E,t),b(B,t)}}}function Q(t){let e,s,o,i;e=new B({props:{title:"Community",description:t[1].concat(t[0]).map(q).join(", ")}});let c=Object.entries(t[2]),m=[];for(let r=0;r<c.length;r+=1)m[r]=F(O(t,c,r));const u=t=>w(m[t],1,1,(()=>{m[t]=null}));return{c(){r(e.$$.fragment),s=n();for(let t=0;t<m.length;t+=1)m[t].c();o=x()},l(t){l(e.$$.fragment,t),s=a(t);for(let e=0;e<m.length;e+=1)m[e].l(t);o=x()},m(t,r){h(e,t,r),p(t,s,r);for(let e=0;e<m.length;e+=1)m[e].m(t,r);p(t,o,r),i=!0},p(t,[s]){const r={};if(3&s&&(r.description=t[1].concat(t[0]).map(q).join(", ")),e.$set(r),12&s){let e;for(c=Object.entries(t[2]),e=0;e<c.length;e+=1){const r=O(t,c,e);m[e]?(m[e].p(r,s),g(m[e],1)):(m[e]=F(r),m[e].c(),g(m[e],1),m[e].m(o.parentNode,o))}for(A(),e=c.length;e<m.length;e+=1)u(e);j()}},i(t){if(!i){g(e.$$.fragment,t);for(let t=0;t<c.length;t+=1)g(m[t]);i=!0}},o(t){w(e.$$.fragment,t),m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)w(m[e]);i=!1},d(t){v(e,t),t&&f(s),b(m,t),t&&f(o)}}}const _=async({fetch:t,page:e})=>({props:{profiles:(await(await t("/profiles.json")).json()).sort((t=>Math.random()>.5))}}),q=t=>t.name;function G(t,e,s){let r,n,o,l,a,i;k(t,N,(t=>s(5,i=t)));let{profiles:c}=e;return E((async t=>{"events"==r&&P("/activities")})),t.$$set=t=>{"profiles"in t&&s(4,c=t.profiles)},t.$$.update=()=>{32&t.$$.dirty&&(r=i.params.type),16&t.$$.dirty&&s(0,n=c.filter((t=>"community"==t.type)).sort(((t,e)=>Math.random()>.5))),16&t.$$.dirty&&s(1,o=c.filter((t=>"organisation"==t.type)).reverse()),3&t.$$.dirty&&s(2,l={Communities:{items:n,component:D,grow:!0,stretch:"width"},Orgs:{items:o,component:D,grow:!0,stretch:"width"}})},s(3,a="/media/community"),[n,o,l,"/media/community",c,i]}export default class extends t{constructor(t){super(),e(this,t,G,Q,s,{profiles:4})}}export{_ as load};
