import{S as t,i as e,s,e as r,k as o,c as n,a as l,n as a,d as i,b as c,f,F as m,v as h,j as p,t as u,m as g,g as d,o as $,h as v,r as w,w as y,u as j,Q as b,l as k,T as x,z as E,B as P}from"../../chunks/vendor-8a091a4f.js";import{g as A}from"../../chunks/navigation-20968cc5.js";import{p as N}from"../../chunks/stores-153c9123.js";import{T as S}from"../../chunks/Title-a01263fc.js";import{H as B}from"../../chunks/Head-cc63206a.js";import{P as C}from"../../chunks/Profiles-55df9d06.js";import{E as D}from"../../chunks/EzeMedia-734d0b37.js";import{u as I}from"../../chunks/utils-eababed0.js";import"../../chunks/singletons-bb9012b7.js";import"../../chunks/_stores-aaa06f8d.js";function O(t,e,s){const r=t.slice();return r[6]=e[s][0],r[7]=e[s][1],r[9]=s,r}function T(t,e,s){const r=t.slice();return r[10]=e[s],r[9]=s,r}function V(t,e,s){const r=t.slice();return r[12]=e[s],r}function z(t){let e;return{c(){e=u("Community")},l(t){e=d(t,"Community")},m(t,s){f(t,e,s)},d(t){t&&i(e)}}}function H(t){var e,s;let j,b,k,x,E,P,A,N,S,B,C,O,T,V,z=t[12].name+"";return x=new D({props:{class:"",file:null==(s=null==(e=t[12])?void 0:e.picture)?void 0:s[0],root:t[2]}}),{c(){j=r("a"),b=r("span"),k=o(),p(x.$$.fragment),E=o(),P=r("span"),A=o(),N=r("span"),S=u(z),O=o(),T=r("div"),this.h()},l(t){j=n(t,"A",{href:!0,class:!0});var e=l(j);b=n(e,"SPAN",{class:!0}),l(b).forEach(i),k=a(e),g(x.$$.fragment,e),E=a(e),P=n(e,"SPAN",{class:!0}),l(P).forEach(i),A=a(e),N=n(e,"SPAN",{class:!0});var s=l(N);S=d(s,z),s.forEach(i),e.forEach(i),O=a(t),T=n(t,"DIV",{class:!0}),l(T).forEach(i),this.h()},h(){c(b,"class","grow"),c(P,"class","grow"),c(N,"class","p1 border mt1"),c(j,"href",B=`/${t[12].type}/${t[12].id}`),c(j,"class",C="no-basis minw12em grow flex column-stretch-flex-start wrap profile-"+t[12].type+" profile-"+t[12]["picture-style"]+" "+I.slugify(t[12].name)),c(T,"class","w1em")},m(t,e){f(t,j,e),m(j,b),m(j,k),$(x,j,null),m(j,E),m(j,P),m(j,A),m(j,N),m(N,S),f(t,O,e),f(t,T,e),V=!0},p(t,e){var s,r;const o={};2&e&&(o.file=null==(r=null==(s=t[12])?void 0:s.picture)?void 0:r[0]),4&e&&(o.root=t[2]),x.$set(o),(!V||2&e)&&z!==(z=t[12].name+"")&&v(S,z),(!V||2&e&&B!==(B=`/${t[12].type}/${t[12].id}`))&&c(j,"href",B),(!V||2&e&&C!==(C="no-basis minw12em grow flex column-stretch-flex-start wrap profile-"+t[12].type+" profile-"+t[12]["picture-style"]+" "+I.slugify(t[12].name)))&&c(j,"class",C)},i(t){V||(h(x.$$.fragment,t),V=!0)},o(t){w(x.$$.fragment,t),V=!1},d(t){t&&i(j),y(x),t&&i(O),t&&i(T)}}}function M(t){let e;return{c(){e=r("div"),this.h()},l(t){e=n(t,"DIV",{class:!0}),l(e).forEach(i),this.h()},h(){c(e,"class","no-basis minw20em flex grow")},m(t,s){f(t,e,s)},d(t){t&&i(e)}}}function F(t){let e,s,p,u,g=t[7].items,d=[];for(let r=0;r<g.length;r+=1)d[r]=H(V(t,g,r));const $=t=>w(d[t],1,1,(()=>{d[t]=null}));let v=new Array(6),y=[];for(let r=0;r<v.length;r+=1)y[r]=M(T(t,v,r));return{c(){e=r("div");for(let t=0;t<d.length;t+=1)d[t].c();s=o();for(let t=0;t<y.length;t+=1)y[t].c();p=o(),this.h()},l(t){e=n(t,"DIV",{class:!0});var r=l(e);for(let e=0;e<d.length;e+=1)d[e].l(r);s=a(r);for(let e=0;e<y.length;e+=1)y[e].l(r);p=a(r),r.forEach(i),this.h()},h(){c(e,"class","flex row-flex-start-stretch wrap mtb1")},m(t,r){f(t,e,r);for(let s=0;s<d.length;s+=1)d[s].m(e,null);m(e,s);for(let s=0;s<y.length;s+=1)y[s].m(e,null);m(e,p),u=!0},p(t,r){if(6&r){let o;for(g=t[7].items,o=0;o<g.length;o+=1){const n=V(t,g,o);d[o]?(d[o].p(n,r),h(d[o],1)):(d[o]=H(n),d[o].c(),h(d[o],1),d[o].m(e,s))}for(P(),o=g.length;o<d.length;o+=1)$(o);j()}},i(t){if(!u){for(let t=0;t<g.length;t+=1)h(d[t]);u=!0}},o(t){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)w(d[e]);u=!1},d(t){t&&i(e),b(d,t),b(y,t)}}}function Q(t){var e,s,r;let n,l,c,m,u,d;n=new B({props:{title:"Profiles, workshops, talks + performances",description:t[0].map(q).join(", "),image:null==(r=null==(s=null==(e=t[0])?void 0:e[0])?void 0:s.cover)?void 0:r[0]}}),c=new S({props:{$$slots:{default:[z]},$$scope:{ctx:t}}});let v=Object.entries(t[1]),x=[];for(let o=0;o<v.length;o+=1)x[o]=F(O(t,v,o));const E=t=>w(x[t],1,1,(()=>{x[t]=null}));return{c(){p(n.$$.fragment),l=o(),p(c.$$.fragment),m=o();for(let t=0;t<x.length;t+=1)x[t].c();u=k()},l(t){g(n.$$.fragment,t),l=a(t),g(c.$$.fragment,t),m=a(t);for(let e=0;e<x.length;e+=1)x[e].l(t);u=k()},m(t,e){$(n,t,e),f(t,l,e),$(c,t,e),f(t,m,e);for(let s=0;s<x.length;s+=1)x[s].m(t,e);f(t,u,e),d=!0},p(t,[e]){var s,r,o;const l={};1&e&&(l.description=t[0].map(q).join(", ")),1&e&&(l.image=null==(o=null==(r=null==(s=t[0])?void 0:s[0])?void 0:r.cover)?void 0:o[0]),n.$set(l);const a={};if(32768&e&&(a.$$scope={dirty:e,ctx:t}),c.$set(a),6&e){let s;for(v=Object.entries(t[1]),s=0;s<v.length;s+=1){const r=O(t,v,s);x[s]?(x[s].p(r,e),h(x[s],1)):(x[s]=F(r),x[s].c(),h(x[s],1),x[s].m(u.parentNode,u))}for(P(),s=v.length;s<x.length;s+=1)E(s);j()}},i(t){if(!d){h(n.$$.fragment,t),h(c.$$.fragment,t);for(let t=0;t<v.length;t+=1)h(x[t]);d=!0}},o(t){w(n.$$.fragment,t),w(c.$$.fragment,t),x=x.filter(Boolean);for(let e=0;e<x.length;e+=1)w(x[e]);d=!1},d(t){y(n,t),t&&i(l),y(c,t),t&&i(m),b(x,t),t&&i(u)}}}const _=async({fetch:t,page:e})=>({props:{profiles:(await(await t("/profiles.json")).json()).sort((t=>Math.random()>.5))}}),q=t=>t.name;function G(t,e,s){let r,o,n,l;x(t,N,(t=>s(3,l=t)));let{profiles:a}=e;return E((async t=>{"events"==r&&A("/activities")})),t.$$set=t=>{"profiles"in t&&s(0,a=t.profiles)},t.$$.update=()=>{8&t.$$.dirty&&(r=l.params.type),1&t.$$.dirty&&s(1,o={Communities:{items:a.filter((t=>"community"==t.type)),component:C,grow:!0,stretch:"width"},Orgs:{items:a.filter((t=>"organisation"==t.type)),component:C,grow:!0,stretch:"width"}})},s(2,n="/media/community"),[a,o,"/media/community",l]}export default class extends t{constructor(t){super(),e(this,t,G,Q,s,{profiles:0})}}export{_ as load};
