import{S as t,i as e,s,j as r,k as o,e as n,m as l,n as a,c as i,a as c,d as f,b as m,o as h,f as p,F as u,v as g,t as $,g as d,h as v,r as w,w as y,u as j,Q as b,l as k,T as x,z as E,B as P}from"../../chunks/vendor-811c4217.js";import{g as A}from"../../chunks/navigation-20968cc5.js";import{p as N}from"../../chunks/stores-abe6a4b1.js";import{T as S}from"../../chunks/Title-03f628f3.js";import{H as B}from"../../chunks/Head-fdf0f33f.js";import{P as D}from"../../chunks/Profiles-a4f64817.js";import{E as I}from"../../chunks/EzeMedia-585cc3dd.js";import{u as M}from"../../chunks/utils-39f3f74c.js";import"../../chunks/singletons-bb9012b7.js";import"../../chunks/_stores-76a31f1a.js";function O(t,e,s){const r=t.slice();return r[7]=e[s][0],r[8]=e[s][1],r[10]=s,r}function T(t,e,s){const r=t.slice();return r[11]=e[s],r[10]=s,r}function V(t,e,s){const r=t.slice();return r[13]=e[s],r}function z(t){let e,s=t[7]+"";return{c(){e=$(s)},l(t){e=d(t,s)},m(t,s){p(t,e,s)},p(t,r){2&r&&s!==(s=t[7]+"")&&v(e,s)},d(t){t&&f(e)}}}function H(t){var e,s;let j,b,k,x,E,P,A,N,S,B,D,O,T,V,z=t[13].name+"";return x=new I({props:{class:"",file:null==(s=null==(e=t[13])?void 0:e.picture)?void 0:s[0],root:t[2]}}),{c(){j=n("a"),b=n("span"),k=o(),r(x.$$.fragment),E=o(),P=n("span"),A=o(),N=n("span"),S=$(z),O=o(),T=n("div"),this.h()},l(t){j=i(t,"A",{href:!0,class:!0});var e=c(j);b=i(e,"SPAN",{class:!0}),c(b).forEach(f),k=a(e),l(x.$$.fragment,e),E=a(e),P=i(e,"SPAN",{class:!0}),c(P).forEach(f),A=a(e),N=i(e,"SPAN",{class:!0});var s=c(N);S=d(s,z),s.forEach(f),e.forEach(f),O=a(t),T=i(t,"DIV",{class:!0}),c(T).forEach(f),this.h()},h(){m(b,"class","grow"),m(P,"class","grow"),m(N,"class","p1 border mt1"),m(j,"href",B=`/${t[13].type}/${t[13].id}`),m(j,"class",D="no-basis minw12em grow flex column-stretch-flex-start wrap profile-"+t[13].type+" profile-"+t[13]["picture-style"]+" "+M.slugify(t[13].name)),m(T,"class","w1em")},m(t,e){p(t,j,e),u(j,b),u(j,k),h(x,j,null),u(j,E),u(j,P),u(j,A),u(j,N),u(N,S),p(t,O,e),p(t,T,e),V=!0},p(t,e){var s,r;const o={};2&e&&(o.file=null==(r=null==(s=t[13])?void 0:s.picture)?void 0:r[0]),4&e&&(o.root=t[2]),x.$set(o),(!V||2&e)&&z!==(z=t[13].name+"")&&v(S,z),(!V||2&e&&B!==(B=`/${t[13].type}/${t[13].id}`))&&m(j,"href",B),(!V||2&e&&D!==(D="no-basis minw12em grow flex column-stretch-flex-start wrap profile-"+t[13].type+" profile-"+t[13]["picture-style"]+" "+M.slugify(t[13].name)))&&m(j,"class",D)},i(t){V||(g(x.$$.fragment,t),V=!0)},o(t){w(x.$$.fragment,t),V=!1},d(t){t&&f(j),y(x),t&&f(O),t&&f(T)}}}function C(t){let e;return{c(){e=n("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),c(e).forEach(f),this.h()},h(){m(e,"class","no-basis minw10em flex grow")},m(t,s){p(t,e,s)},d(t){t&&f(e)}}}function F(t){let e,s,$,d,v,k;e=new S({props:{$$slots:{default:[z]},$$scope:{ctx:t}}});let x=t[8].items,E=[];for(let r=0;r<x.length;r+=1)E[r]=H(V(t,x,r));const A=t=>w(E[t],1,1,(()=>{E[t]=null}));let N=new Array(6),B=[];for(let r=0;r<N.length;r+=1)B[r]=C(T(t,N,r));return{c(){r(e.$$.fragment),s=o(),$=n("div");for(let t=0;t<E.length;t+=1)E[t].c();d=o();for(let t=0;t<B.length;t+=1)B[t].c();v=o(),this.h()},l(t){l(e.$$.fragment,t),s=a(t),$=i(t,"DIV",{class:!0});var r=c($);for(let e=0;e<E.length;e+=1)E[e].l(r);d=a(r);for(let e=0;e<B.length;e+=1)B[e].l(r);v=a(r),r.forEach(f),this.h()},h(){m($,"class","flex row-flex-start-stretch wrap mtb1")},m(t,r){h(e,t,r),p(t,s,r),p(t,$,r);for(let e=0;e<E.length;e+=1)E[e].m($,null);u($,d);for(let e=0;e<B.length;e+=1)B[e].m($,null);u($,v),k=!0},p(t,s){const r={};if(65538&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r),6&s){let e;for(x=t[8].items,e=0;e<x.length;e+=1){const r=V(t,x,e);E[e]?(E[e].p(r,s),g(E[e],1)):(E[e]=H(r),E[e].c(),g(E[e],1),E[e].m($,d))}for(P(),e=x.length;e<E.length;e+=1)A(e);j()}},i(t){if(!k){g(e.$$.fragment,t);for(let t=0;t<x.length;t+=1)g(E[t]);k=!0}},o(t){w(e.$$.fragment,t),E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)w(E[e]);k=!1},d(t){y(e,t),t&&f(s),t&&f($),b(E,t),b(B,t)}}}function Q(t){var e,s,n;let i,c,m,u;i=new B({props:{title:"Profiles, workshops, talks + performances",description:t[0].map(q).join(", "),image:null==(n=null==(s=null==(e=t[0])?void 0:e[0])?void 0:s.cover)?void 0:n[0]}});let $=Object.entries(t[1]),d=[];for(let r=0;r<$.length;r+=1)d[r]=F(O(t,$,r));const v=t=>w(d[t],1,1,(()=>{d[t]=null}));return{c(){r(i.$$.fragment),c=o();for(let t=0;t<d.length;t+=1)d[t].c();m=k()},l(t){l(i.$$.fragment,t),c=a(t);for(let e=0;e<d.length;e+=1)d[e].l(t);m=k()},m(t,e){h(i,t,e),p(t,c,e);for(let s=0;s<d.length;s+=1)d[s].m(t,e);p(t,m,e),u=!0},p(t,[e]){var s,r,o;const n={};if(1&e&&(n.description=t[0].map(q).join(", ")),1&e&&(n.image=null==(o=null==(r=null==(s=t[0])?void 0:s[0])?void 0:r.cover)?void 0:o[0]),i.$set(n),6&e){let s;for($=Object.entries(t[1]),s=0;s<$.length;s+=1){const r=O(t,$,s);d[s]?(d[s].p(r,e),g(d[s],1)):(d[s]=F(r),d[s].c(),g(d[s],1),d[s].m(m.parentNode,m))}for(P(),s=$.length;s<d.length;s+=1)v(s);j()}},i(t){if(!u){g(i.$$.fragment,t);for(let t=0;t<$.length;t+=1)g(d[t]);u=!0}},o(t){w(i.$$.fragment,t),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)w(d[e]);u=!1},d(t){y(i,t),t&&f(c),b(d,t),t&&f(m)}}}const _=async({fetch:t,page:e})=>({props:{profiles:(await(await t("/profiles.json")).json()).sort((t=>Math.random()>.5))}}),q=t=>t.name;function G(t,e,s){let r,o,n,l,a;x(t,N,(t=>s(3,a=t)));let{profiles:i}=e;return E((async t=>{"events"==r&&A("/activities")})),t.$$set=t=>{"profiles"in t&&s(0,i=t.profiles)},t.$$.update=()=>{8&t.$$.dirty&&(r=a.params.type),1&t.$$.dirty&&s(4,o=i.filter((t=>"community"==t.type)).sort(((t,e)=>Math.random()>.5))),17&t.$$.dirty&&s(1,n={Communities:{items:o,component:D,grow:!0,stretch:"width"},Orgs:{items:i.filter((t=>"organisation"==t.type)).reverse(),component:D,grow:!0,stretch:"width"}})},s(2,l="/media/community"),[i,n,"/media/community",a,o]}export default class extends t{constructor(t){super(),e(this,t,G,Q,s,{profiles:0})}}export{_ as load};
