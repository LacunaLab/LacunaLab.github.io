import{S as t,i as e,s,e as a,t as r,k as n,c as l,a as i,g as o,n as c,d as f,b as $,Y as p,f as m,F as u,h as d,j as g,m as h,E as v,o as x,v as w,r as j,w as k,Q as b,T as y}from"../../chunks/vendor-811c4217.js";import{p as E}from"../../chunks/stores-abe6a4b1.js";import{T as D}from"../../chunks/Title-03f628f3.js";import{E as O}from"../../chunks/Events-308f2c4e.js";import{H as Y}from"../../chunks/Head-fdf0f33f.js";import{u as q}from"../../chunks/utils-39f3f74c.js";import"../../chunks/Timestamp-d4e90dce.js";import"../../chunks/Tag-1674f1db.js";import"../../chunks/EzeMedia-585cc3dd.js";import"../../chunks/_stores-76a31f1a.js";function I(t,e,s){const a=t.slice();return a[5]=e[s],a[7]=s,a}function T(t){let e;return{c(){e=r(t[0])},l(s){e=o(s,t[0])},m(t,s){m(t,e,s)},p(t,s){1&s&&d(e,t[0])},d(t){t&&f(e)}}}function F(t){let e,s,g,h,v=t[5]+"";return{c(){e=a("a"),s=r(v),g=n(),this.h()},l(t){e=l(t,"A",{class:!0,href:!0});var a=i(e);s=o(a,v),g=c(a),a.forEach(f),this.h()},h(){$(e,"class","br bb plr1 ptb0-5 block text-center"),$(e,"href",h=`?q=${t[5]}`),p(e,"filled",t[2]==t[5]||"all"==t[5]&&-1==t[1].indexOf(t[2]))},m(t,a){m(t,e,a),u(e,s),u(e,g)},p(t,a){8&a&&v!==(v=t[5]+"")&&d(s,v),8&a&&h!==(h=`?q=${t[5]}`)&&$(e,"href",h),14&a&&p(e,"filled",t[2]==t[5]||"all"==t[5]&&-1==t[1].indexOf(t[2]))},d(t){t&&f(e)}}}function M(t){let e,s,r,o,p,d;r=new D({props:{$$slots:{default:[T]},$$scope:{ctx:t}}});let y=t[3],E=[];for(let a=0;a<y.length;a+=1)E[a]=F(I(t,y,a));return{c(){e=a("div"),s=a("div"),g(r.$$.fragment),o=n(),p=a("div");for(let t=0;t<E.length;t+=1)E[t].c();this.h()},l(t){e=l(t,"DIV",{class:!0});var a=i(e);s=l(a,"DIV",{class:!0});var n=i(s);h(r.$$.fragment,n),n.forEach(f),o=c(a),p=l(a,"DIV",{class:!0,style:!0});var $=i(p);for(let e=0;e<E.length;e+=1)E[e].l($);$.forEach(f),a.forEach(f),this.h()},h(){$(s,"class","minw12em"),$(p,"class","row flex wrap bl mb1 bt"),v(p,"margin-top","calc(var(--stroke-width)*-1)"),$(e,"class","flex row-space-between-flex-start wrap")},m(t,a){m(t,e,a),u(e,s),x(r,s,null),u(e,o),u(e,p);for(let e=0;e<E.length;e+=1)E[e].m(p,null);d=!0},p(t,[e]){const s={};if(257&e&&(s.$$scope={dirty:e,ctx:t}),r.$set(s),14&e){let s;for(y=t[3],s=0;s<y.length;s+=1){const a=I(t,y,s);E[s]?E[s].p(a,e):(E[s]=F(a),E[s].c(),E[s].m(p,null))}for(;s<E.length;s+=1)E[s].d(1);E.length=y.length}},i(t){d||(w(r.$$.fragment,t),d=!0)},o(t){j(r.$$.fragment,t),d=!1},d(t){t&&f(e),k(r),b(E,t)}}}function V(t,e,s){let a,r,n;y(t,E,(t=>s(4,n=t)));let{title:l=""}=e,{tags:i=[]}=e;return t.$$set=t=>{"title"in t&&s(0,l=t.title),"tags"in t&&s(1,i=t.tags)},t.$$.update=()=>{16&t.$$.dirty&&s(2,a=n.query.get("q")),2&t.$$.dirty&&s(3,r=["all",...i])},[l,i,a,r,n]}class A extends t{constructor(t){super(),e(this,t,V,M,s,{title:0,tags:1})}}function H(t){var e,s,a;let r,l,i,o,$,p;return r=new Y({props:{title:"Exhibitions, workshops, meetups, talks, performances",description:t[0].map(t[6]).join(", "),image:null==(a=null==(s=null==(e=t[0])?void 0:e[0])?void 0:s.cover)?void 0:a[0]}}),i=new A({props:{title:"Activities",tags:t[1].concat(t[2])}}),$=new O({props:{events:t[3],alternate:!1}}),{c(){g(r.$$.fragment),l=n(),g(i.$$.fragment),o=n(),g($.$$.fragment)},l(t){h(r.$$.fragment,t),l=c(t),h(i.$$.fragment,t),o=c(t),h($.$$.fragment,t)},m(t,e){x(r,t,e),m(t,l,e),x(i,t,e),m(t,o,e),x($,t,e),p=!0},p(t,[e]){var s,a,n;const l={};1&e&&(l.description=t[0].map(t[6]).join(", ")),1&e&&(l.image=null==(n=null==(a=null==(s=t[0])?void 0:s[0])?void 0:a.cover)?void 0:n[0]),r.$set(l);const o={};6&e&&(o.tags=t[1].concat(t[2])),i.$set(o);const c={};8&e&&(c.events=t[3]),$.$set(c)},i(t){p||(w(r.$$.fragment,t),w(i.$$.fragment,t),w($.$$.fragment,t),p=!0)},o(t){j(r.$$.fragment,t),j(i.$$.fragment,t),j($.$$.fragment,t),p=!1},d(t){k(r,t),t&&f(l),k(i,t),t&&f(o),k($,t)}}}const z=async({fetch:t,page:e})=>{console.log(e);let s=[],a=[];return{props:{events:(await(await t("/events.json")).json()).sort(((t,e)=>e.start-t.start)).map((t=>{let e=new Date(1e3*t.start).getFullYear();return-1==a.indexOf(e)&&a.push(e),(t.tags||[]).forEach((t=>{-1==s.indexOf(t.id)&&s.push(t.id)})),t})),tags:s,years:a}}};function Q(t,e,s){let a,r,n;y(t,E,(t=>s(5,n=t)));let{events:l}=e,{tags:i}=e,{years:o}=e;return t.$$set=t=>{"events"in t&&s(0,l=t.events),"tags"in t&&s(1,i=t.tags),"years"in t&&s(2,o=t.years)},t.$$.update=()=>{32&t.$$.dirty&&s(4,a=n.query.get("q")),23&t.$$.dirty&&s(3,r=l.filter((t=>-1!=i.indexOf(a)?-1!=((null==t?void 0:t.tags)||[]).map((t=>t.id)).indexOf(a):-1==o.indexOf(parseInt(a))||new Date(1e3*t.start).getFullYear()==parseInt(a))))},[l,i,o,r,a,n,t=>`${t.title} (${q.timestamp(t.start,"DD-MM-YYYY")})`]}export default class extends t{constructor(t){super(),e(this,t,Q,H,s,{events:0,tags:1,years:2})}}export{z as load};
