import{S as t,i as e,s as i,e as o,c as n,a,d as l,b as s,f as r,L as c,z as d,a0 as u,a1 as h,K as p,k as g,n as m,F as f,v as $,r as y,A as w,X as v,V as A,j as b,m as k,o as x,p as j,q as E,W as S,w as z,Y as C,G as I,I as V,t as F,g as N,T as R}from"./vendor-1c7a3457.js";import{E as q,A as O,M as T}from"./_stores-679a7eb8.js";import{u as H}from"./utils-0aafa1d0.js";function Y(t){let e;return{c(){e=o("span"),this.h()},l(t){e=n(t,"SPAN",{class:!0,id:!0}),a(e).forEach(l),this.h()},h(){s(e,"class","fill vimeo"),s(e,"id",t[1])},m(i,o){r(i,e,o),t[17](e)},p(t,[i]){2&i&&s(e,"id",t[1])},i:c,o:c,d(i){i&&l(e),t[17](null)}}}function B(t){console.log("PLAY!!!")}function P(t,e,i){let o,n,a,{file:l}=e,{autohide:s=!1}=e,{format:r=""}=e,{hidden:c=!!s}=e,{paused:g=!0}=e,{autoplay:m=!1}=e,{muted:f=!0}=e,{loop:$=!0}=e,{root:y=null}=e,{orientation:w}=e,{width:v=1280}=e,{height:A=720}=e,{ratio:b}=e,{class:k=""}=e,{style:x=""}=e;return d((async t=>{if(n)return;n=new u(a,{url:l.url,background:!1,width:"100%",height:800,color:"#333",dnt:!0}),await n.on("play",B);const e=await n.getVideoTitle();i(2,v=await n.getVideoWidth()),i(3,A=await n.getVideoHeight()),i(4,b=A/v*100),console.log("[vimeo] getting dimensions",{title:e,width:v,height:A})})),h((async t=>{n&&await n.destroy()})),t.$$set=t=>{"file"in t&&i(5,l=t.file),"autohide"in t&&i(6,s=t.autohide),"format"in t&&i(7,r=t.format),"hidden"in t&&i(8,c=t.hidden),"paused"in t&&i(9,g=t.paused),"autoplay"in t&&i(10,m=t.autoplay),"muted"in t&&i(11,f=t.muted),"loop"in t&&i(12,$=t.loop),"root"in t&&i(13,y=t.root),"orientation"in t&&i(14,w=t.orientation),"width"in t&&i(2,v=t.width),"height"in t&&i(3,A=t.height),"ratio"in t&&i(4,b=t.ratio),"class"in t&&i(15,k=t.class),"style"in t&&i(16,x=t.style)},t.$$.update=()=>{t.$$.dirty,64&t.$$.dirty&&i(1,o=s||"vimeo-player-untitled")},[a,o,v,A,b,l,s,r,c,g,m,f,$,y,w,k,x,function(t){p[t?"unshift":"push"]((()=>{a=t,i(0,a)}))}]}class G extends t{constructor(t){super(),e(this,t,P,Y,i,{file:5,autohide:6,format:7,hidden:8,paused:9,autoplay:10,muted:11,loop:12,root:13,orientation:14,width:2,height:3,ratio:4,class:15,style:16})}}function K(t){let e,i,o,n,a;const l=[t[21]];function s(e){t[39](e)}function r(e){t[40](e)}function c(e){t[41](e)}let d={};for(let u=0;u<l.length;u+=1)d=w(d,l[u]);return void 0!==t[6]&&(d.width=t[6]),void 0!==t[7]&&(d.height=t[7]),void 0!==t[8]&&(d.ratio=t[8]),e=new G({props:d}),p.push((()=>A(e,"width",s))),p.push((()=>A(e,"height",r))),p.push((()=>A(e,"ratio",c))),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,i){x(e,t,i),a=!0},p(t,a){const s=2097152&a[0]?j(l,[E(t[21])]):{};!i&&64&a[0]&&(i=!0,s.width=t[6],S((()=>i=!1))),!o&&128&a[0]&&(o=!0,s.height=t[7],S((()=>o=!1))),!n&&256&a[0]&&(n=!0,s.ratio=t[8],S((()=>n=!1))),e.$set(s)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function L(t){let e,i,d,u,h,p,g,m,f,$=!0;return{c(){e=o("video"),this.h()},l(t){e=n(t,"VIDEO",{class:!0,poster:!0,width:!0,height:!0,playsinline:!0,src:!0,muted:!0,autoplay:!0,loop:!0,preload:!0,controls:!0}),a(e).forEach(l),this.h()},h(){s(e,"class",i="embed fill "+t[17]+" z-index66"),s(e,"poster",d=t[9]?W:t[11]),s(e,"width",t[6]),s(e,"height",t[7]),e.playsInline=!0,e.src!==(u=t[9]?W:t[10])&&s(e,"src",u),e.muted=h=!t[14],e.autoplay=p=t[0]&&!t[1],e.loop=t[2],s(e,"preload",g=t[9]?"none":"auto"),e.controls=t[3],C(e,"active",!t[9]),C(e,"playing",!t[1]),C(e,"paused",t[1])},m(i,o){r(i,e,o),t[37](e),m||(f=[I(e,"play",X),I(e,"click",t[19]),I(e,"fullscreenchange",t[20]),I(e,"play",t[38]),I(e,"pause",t[38])],m=!0)},p(t,o){131072&o[0]&&i!==(i="embed fill "+t[17]+" z-index66")&&s(e,"class",i),2560&o[0]&&d!==(d=t[9]?W:t[11])&&s(e,"poster",d),64&o[0]&&s(e,"width",t[6]),128&o[0]&&s(e,"height",t[7]),1536&o[0]&&e.src!==(u=t[9]?W:t[10])&&s(e,"src",u),16384&o[0]&&h!==(h=!t[14])&&(e.muted=h),3&o[0]&&p!==(p=t[0]&&!t[1])&&(e.autoplay=p),4&o[0]&&(e.loop=t[2]),512&o[0]&&g!==(g=t[9]?"none":"auto")&&s(e,"preload",g),8&o[0]&&(e.controls=t[3]),2&o[0]&&$!==($=t[1])&&e[$?"pause":"play"](),131584&o[0]&&C(e,"active",!t[9]),131074&o[0]&&C(e,"playing",!t[1]),131074&o[0]&&C(e,"paused",t[1])},i:c,o:c,d(i){i&&l(e),t[37](null),m=!1,V(f)}}}function M(t){let e,i,a;return{c(){e=o("img"),this.h()},l(t){e=n(t,"IMG",{class:!0,width:!0,height:!0,src:!0}),this.h()},h(){s(e,"class",i="embed fill "+t[17]),s(e,"width",t[6]),s(e,"height",t[7]),e.src!==(a=t[9]?W:t[11])&&s(e,"src",a),C(e,"active",!t[9])},m(t,i){r(t,e,i)},p(t,o){131072&o[0]&&i!==(i="embed fill "+t[17])&&s(e,"class",i),64&o[0]&&s(e,"width",t[6]),128&o[0]&&s(e,"height",t[7]),2560&o[0]&&e.src!==(a=t[9]?W:t[11])&&s(e,"src",a),131584&o[0]&&C(e,"active",!t[9])},i:c,o:c,d(t){t&&l(e)}}}function U(t){let e,i;return{c(){e=o("div"),i=F(Q),this.h()},l(t){e=n(t,"DIV",{class:!0});var o=a(e);i=N(o,Q),o.forEach(l),this.h()},h(){s(e,"class","fill flex row-center-center")},m(t,o){r(t,e,o),f(e,i)},p:c,i:c,o:c,d(t){t&&l(e)}}}function D(t){let e,i,c,d,u,h,p,w,v;const A=[U,M,L,K],b=[];var k;return~(i=(k=t)[18]("image")?1:k[18]("video")?2:k[18]("vimeo")?3:-1)&&(c=b[i]=A[i](t)),{c(){e=o("span"),c&&c.c(),d=g(),u=o("canvas"),this.h()},l(t){e=n(t,"SPAN",{class:!0,style:!0});var i=a(e);c&&c.l(i),d=m(i),u=n(i,"CANVAS",{class:!0,width:!0,height:!0}),a(u).forEach(l),i.forEach(l),this.h()},h(){s(u,"class",h="hidden "+t[17]),s(u,"width",t[6]),s(u,"height",t[7]),s(e,"class",p=`${Object.values(t[16]).join(" ")} media block rel overflow-hidden ${t[4]}`),s(e,"style",w=`${t[5]};${t[15]};`)},m(o,n){r(o,e,n),~i&&b[i].m(e,null),f(e,d),f(e,u),t[42](e),v=!0},p(t,i){c&&c.p(t,i),(!v||131072&i[0]&&h!==(h="hidden "+t[17]))&&s(u,"class",h),(!v||64&i[0])&&s(u,"width",t[6]),(!v||128&i[0])&&s(u,"height",t[7]),(!v||65552&i[0]&&p!==(p=`${Object.values(t[16]).join(" ")} media block rel overflow-hidden ${t[4]}`))&&s(e,"class",p),(!v||32800&i[0]&&w!==(w=`${t[5]};${t[15]};`))&&s(e,"style",w)},i(t){v||($(c),v=!0)},o(t){y(c),v=!1},d(o){o&&l(e),~i&&b[i].d(),t[42](null)}}}let Q=null;const W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function X(){}function _(t,e,i){let o,n,a,l,s,r,c,{autoplaying:u}=e,{muted:h}=e,{scroller:g}=e,{centroid:m}=e,{eze:f}=e,$=H.browser,{file:y}=e,{autohide:A=!1}=e,{format:b=""}=e,{loop:k=!0}=e,{threshold:x=.75}=e,{orientation:j=null}=e,{paused:E=!0}=e,{root:S}=e,{force:z=!1}=e,{controls:C=!1}=e,{stretch:I="width"}=e,{align:V="start"}=e,{class:F=""}=e,{style:N=""}=e;$&&H.device();let R,q,O=!!A;function T(t,e){t&&e&&(i(23,j=t>=e?"portrait":"landscape"),console.log("[media] notifying orientation",j))}const Y=(t,e)=>{var i=e||"/",o=new RegExp(i+"{1,}","g");return t.join(i).replace(o,i)};let B,P=null,G=null,K=null;let L,M;let U=!1;function D(t,e){if(!$||!A||!U)return;M&&(clearTimeout(M),M=null);const o=(null==L?void 0:L.getBoundingClientRect())||{},n=-window.innerHeight,a=-1*o.y>o.height-n,l=o.y>window.innerHeight-n;i(9,O=a||l),M=setTimeout((t=>{const e=(null==m?void 0:m.id)||"undefined-centroid",n=(null==m?void 0:m.center)||999999999,a=Math.abs(o.y+o.height/2-window.innerHeight/2);A==e&&a!=n&&i(22,m={center:a,id:A}),a<n&&e!=A&&(console.log(`[media] ☯️  new centroid : ${P}/${G}/${(K||0).toFixed(2)} ${A}`),i(22,m={center:a,id:A})),s&&i(1,E=m.id!=A||!u)}),20)}d((async t=>{U=!0,setTimeout((t=>{D()}),100)}));let Q=!1,W=!1;let X={height:{wh:"w-auto h100pc ",start:"",center:"l50pc translate-500 ",end:"l50pc translate-500 "},width:{wh:"w100pc h-auto ",start:"",center:"t50pc translate0-50 ",end:"b50pc translate0-50 "}};return t.$$set=t=>{i(21,e=w(w({},e),v(t))),"autoplaying"in t&&i(0,u=t.autoplaying),"muted"in t&&i(24,h=t.muted),"scroller"in t&&i(25,g=t.scroller),"centroid"in t&&i(22,m=t.centroid),"eze"in t&&i(26,f=t.eze),"file"in t&&i(27,y=t.file),"autohide"in t&&i(28,A=t.autohide),"format"in t&&i(29,b=t.format),"loop"in t&&i(2,k=t.loop),"threshold"in t&&i(30,x=t.threshold),"orientation"in t&&i(23,j=t.orientation),"paused"in t&&i(1,E=t.paused),"root"in t&&i(31,S=t.root),"force"in t&&i(32,z=t.force),"controls"in t&&i(3,C=t.controls),"stretch"in t&&i(33,I=t.stretch),"align"in t&&i(34,V=t.align),"class"in t&&i(4,F=t.class),"style"in t&&i(5,N=t.style)},t.$$.update=()=>{var e,d,p,g;16777216&t.$$.dirty[0]&&i(14,o=!h),1073742080&t.$$.dirty[0]&&T(K,x),134217728&t.$$.dirty[0]&&async function(t){var e;if(!t)return;let{id:o,location:n}=t,{ext:a,name:l}=(null==t?void 0:t.item)||{};if(i(8,K=null==(e=null==t?void 0:t.item)?void 0:e.ratio),a=a?"."+a:a,console.log("[media] syncing file",n,o,b),o&&n&&a&&l){S||console.error("[media] no root is set!");let e=b;if(i(6,P=parseInt(e.split("x")[0])),i(7,G=parseInt(e.split("x")[1])),0==P?i(6,P=G/K):0==G?i(7,G=P*K):isNaN(P)||isNaN(G)?(i(6,P=t.item.width),i(7,G=t.item.height)):i(8,K=1),T(K,x),(null==e?void 0:e.length)>0&&(e="."+e),(null==f?void 0:f.api)&&""!=(null==f?void 0:f.api)&&(null==f?void 0:f.copy)){const t=Y([f.project,f.assets,S]),o=Y(["/media/",y.location]),n=l+e+a,s=l+a,r=`?copy=${Y([t,s])}`,c=`?copy=${Y([t,n])}`,d="/"==f.api.substring(f.api.length-1)?f.api.substring(0,f.api.length-1):f.api;i(10,R=d+Y([o,s+r])),i(11,q=d+Y([o,n+c])),z&&(await fetch(R),await fetch(q)),console.log("[media] pinging API to copy file:",l)}else i(10,R=Y([S,l+a])),i(11,q=Y([S,l+e+a]));console.log("[media] formatted to:"),console.log(`[media] video thumbnail: ${R}`),console.log(`[media] thumb thumbnail: ${R}`)}else console.error("[media] media file is missing id location ext name:",{id:o,location:n,ext:a,name:l},t),console.error("[media] media file:",t)}(y),134217728&t.$$.dirty[0]&&i(35,n=function(t){var e;if(!(null==(e=null==y?void 0:y.item)?void 0:e.vibrant))return{};let i={};for(const[o,n]of Object.entries(y.item.vibrant))i[o.toLowerCase()]=`rgb(${n.rgb.join(",")})`;return i}()),1&t.$$.dirty[0]&&(g=u,(null==m?void 0:m.id)==A&&s&&i(1,E=!g)),2&t.$$.dirty[0]&&(E||U||i(1,E=!0)),37748736&t.$$.dirty[0]&&D(),16&t.$$.dirty[1]&&i(36,a=(null==n?void 0:n.vibrant)||"var(--color)"),32&t.$$.dirty[1]&&i(15,l=`background-image: linear-gradient(to top left, transparent 0%, transparent calc(50% - var(--stroke-width)), ${a} 50%, transparent calc(50% + var(--stroke-width)), transparent 100%), linear-gradient(to top right, transparent 0%, transparent calc(50% - var(--stroke-width)), ${a} 50%, transparent calc(50% + var(--stroke-width)), transparent 100%);box-shadow:inset 0px 0px 0px 1px ${a}`),272629761&t.$$.dirty[0]&&u&&(null==m||m.id),142606784&t.$$.dirty[0]&&i(16,r={mime:"media-mime-"+H.slugify(((null==(e=null==y?void 0:y.item)?void 0:e.mime)||"").split("/")[0]),width:"media-width-"+P,height:"media-height-"+G,ratio:"media-ratio-"+K,orientation:"media-orientation-"+j}),12&t.$$.dirty[1]&&i(17,c=((null==(d=X[I])?void 0:d.wh)||"")+((null==(p=X[I])?void 0:p[V])||""))},s=!0,e=v(e),[u,E,k,C,F,N,P,G,K,O,R,q,B,L,o,l,r,c,t=>H.isFileType(t,y),function(t){t.target.requestFullScreen?t.target.requestFullScreen():t.target.mozRequestFullScreen?t.target.mozRequestFullScreen():t.target.webkitRequestFullScreen?t.target.webkitRequestFullScreen():i(0,u=!u)},function(t,e){const n=document.fullscreenElement==t.target;n&&(Q=o,W=E,i(0,u=!0)),!o&&n&&i(14,o=!0),E&&n&&i(1,E=!1),n||(i(14,o=Q),i(1,E=W))},e,m,j,h,g,f,y,A,b,x,S,z,I,V,n,a,function(t){p[t?"unshift":"push"]((()=>{B=t,i(12,B)}))},function(){E=this.paused,i(1,E)},function(t){P=t,i(6,P)},function(t){G=t,i(7,G)},function(t){K=t,i(8,K)},function(t){p[t?"unshift":"push"]((()=>{L=t,i(13,L)}))}]}class J extends t{constructor(t){super(),e(this,t,_,D,i,{autoplaying:0,muted:24,scroller:25,centroid:22,eze:26,file:27,autohide:28,format:29,loop:2,threshold:30,orientation:23,paused:1,root:31,force:32,controls:3,stretch:33,align:34,class:4,style:5},[-1,-1])}}function Z(t){let e,i;return e=new J({props:{class:t[6]+" grow",style:(t[4]?`background-color: ${t[8]};color:${t[8]};`:"")+t[7],format:t[0],file:t[1],root:t[2],stretch:t[3],eze:t[9],align:t[5],autoplaying:t[10],muted:t[11]}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,o){x(e,t,o),i=!0},p(t,[i]){const o={};64&i&&(o.class=t[6]+" grow"),400&i&&(o.style=(t[4]?`background-color: ${t[8]};color:${t[8]};`:"")+t[7]),1&i&&(o.format=t[0]),2&i&&(o.file=t[1]),4&i&&(o.root=t[2]),8&i&&(o.stretch=t[3]),512&i&&(o.eze=t[9]),32&i&&(o.align=t[5]),1024&i&&(o.autoplaying=t[10]),2048&i&&(o.muted=t[11]),e.$set(o)},i(t){i||($(e.$$.fragment,t),i=!0)},o(t){y(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function tt(t,e,i){let o,n,a,l;R(t,q,(t=>i(9,n=t))),R(t,O,(t=>i(10,a=t))),R(t,T,(t=>i(11,l=t)));let{format:s}=e,{file:r}=e,{root:c}=e,{stretch:d}=e,{background:u=!0}=e,{align:h="start"}=e,{class:p=""}=e,{style:g=""}=e;return t.$$set=t=>{"format"in t&&i(0,s=t.format),"file"in t&&i(1,r=t.file),"root"in t&&i(2,c=t.root),"stretch"in t&&i(3,d=t.stretch),"background"in t&&i(4,u=t.background),"align"in t&&i(5,h=t.align),"class"in t&&i(6,p=t.class),"style"in t&&i(7,g=t.style)},t.$$.update=()=>{var e,n;2&t.$$.dirty&&i(8,o=((null==(n=null==(e=null==r?void 0:r.item)?void 0:e.meta)?void 0:n.colours)||[])[0])},[s,r,c,d,u,h,p,g,o,n,a,l]}class et extends t{constructor(t){super(),e(this,t,tt,Z,i,{format:0,file:1,root:2,stretch:3,background:4,align:5,class:6,style:7})}}export{et as E};
