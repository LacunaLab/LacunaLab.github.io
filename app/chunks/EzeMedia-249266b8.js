import{S as t,i as e,s as i,e as o,c as n,a,d as l,b as s,f as r,M as c,z as d,$ as u,a0 as h,K as p,k as m,n as f,F as g,v as $,r as y,A as v,X as w,V as A,j as b,m as x,o as k,p as j,q as E,W as S,w as z,Y as C,G as I,I as V,t as F,g as N,T as R}from"./vendor-60623916.js";import{E as q,A as O,M as T}from"./_stores-88dd5ace.js";import{u as H}from"./utils-b0a22032.js";function Y(t){let e;return{c(){e=o("span"),this.h()},l(t){e=n(t,"SPAN",{class:!0,id:!0}),a(e).forEach(l),this.h()},h(){s(e,"class","fill vimeo"),s(e,"id",t[1])},m(i,o){r(i,e,o),t[17](e)},p(t,[i]){2&i&&s(e,"id",t[1])},i:c,o:c,d(i){i&&l(e),t[17](null)}}}function B(t){console.log("PLAY!!!")}function M(t,e,i){let o,n,a,{file:l}=e,{autohide:s=!1}=e,{format:r=""}=e,{hidden:c=!!s}=e,{paused:m=!0}=e,{autoplay:f=!1}=e,{muted:g=!0}=e,{loop:$=!0}=e,{root:y=null}=e,{orientation:v}=e,{width:w=1280}=e,{height:A=720}=e,{ratio:b}=e,{class:x=""}=e,{style:k=""}=e;return d((async t=>{if(n)return;n=new u(a,{url:l.url,background:!1,width:"100%",height:800,color:"#333",dnt:!0}),await n.on("play",B);const e=await n.getVideoTitle();i(2,w=await n.getVideoWidth()),i(3,A=await n.getVideoHeight()),i(4,b=A/w*100),console.log("[vimeo] getting dimensions",{title:e,width:w,height:A})})),h((async t=>{n&&await n.destroy()})),t.$$set=t=>{"file"in t&&i(5,l=t.file),"autohide"in t&&i(6,s=t.autohide),"format"in t&&i(7,r=t.format),"hidden"in t&&i(8,c=t.hidden),"paused"in t&&i(9,m=t.paused),"autoplay"in t&&i(10,f=t.autoplay),"muted"in t&&i(11,g=t.muted),"loop"in t&&i(12,$=t.loop),"root"in t&&i(13,y=t.root),"orientation"in t&&i(14,v=t.orientation),"width"in t&&i(2,w=t.width),"height"in t&&i(3,A=t.height),"ratio"in t&&i(4,b=t.ratio),"class"in t&&i(15,x=t.class),"style"in t&&i(16,k=t.style)},t.$$.update=()=>{t.$$.dirty,64&t.$$.dirty&&i(1,o=s||"vimeo-player-untitled")},[a,o,w,A,b,l,s,r,c,m,f,g,$,y,v,x,k,function(t){p[t?"unshift":"push"]((()=>{a=t,i(0,a)}))}]}class P extends t{constructor(t){super(),e(this,t,M,Y,i,{file:5,autohide:6,format:7,hidden:8,paused:9,autoplay:10,muted:11,loop:12,root:13,orientation:14,width:2,height:3,ratio:4,class:15,style:16})}}function G(t){let e,i,o,n,a;const l=[t[19]];function s(e){t[36](e)}function r(e){t[37](e)}function c(e){t[38](e)}let d={};for(let u=0;u<l.length;u+=1)d=v(d,l[u]);return void 0!==t[5]&&(d.width=t[5]),void 0!==t[6]&&(d.height=t[6]),void 0!==t[7]&&(d.ratio=t[7]),e=new P({props:d}),p.push((()=>A(e,"width",s))),p.push((()=>A(e,"height",r))),p.push((()=>A(e,"ratio",c))),{c(){b(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,i){k(e,t,i),a=!0},p(t,a){const s=524288&a[0]?j(l,[E(t[19])]):{};!i&&32&a[0]&&(i=!0,s.width=t[5],S((()=>i=!1))),!o&&64&a[0]&&(o=!0,s.height=t[6],S((()=>o=!1))),!n&&128&a[0]&&(n=!0,s.ratio=t[7],S((()=>n=!1))),e.$set(s)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function K(t){let e,i,d,u,h,p,m,f,g=!0;return{c(){e=o("video"),this.h()},l(t){e=n(t,"VIDEO",{class:!0,poster:!0,width:!0,height:!0,playsinline:!0,src:!0,muted:!0,autoplay:!0,loop:!0,preload:!0,controls:!0}),a(e).forEach(l),this.h()},h(){s(e,"class","embed fill w100pc h-auto z-index66"),s(e,"poster",i=t[8]?W:t[10]),s(e,"width",t[5]),s(e,"height",t[6]),e.playsInline=!0,e.src!==(d=t[8]?W:t[9])&&s(e,"src",d),e.muted=u=!t[13],e.autoplay=h=t[0]&&!t[1],e.loop=t[2],s(e,"preload",p=t[8]?"none":"auto"),e.controls=t[3],C(e,"active",!t[8]),C(e,"playing",!t[1]),C(e,"paused",t[1])},m(i,o){r(i,e,o),t[34](e),m||(f=[I(e,"play",X),I(e,"click",t[17]),I(e,"fullscreenchange",t[18]),I(e,"play",t[35]),I(e,"pause",t[35])],m=!0)},p(t,o){1280&o[0]&&i!==(i=t[8]?W:t[10])&&s(e,"poster",i),32&o[0]&&s(e,"width",t[5]),64&o[0]&&s(e,"height",t[6]),768&o[0]&&e.src!==(d=t[8]?W:t[9])&&s(e,"src",d),8192&o[0]&&u!==(u=!t[13])&&(e.muted=u),3&o[0]&&h!==(h=t[0]&&!t[1])&&(e.autoplay=h),4&o[0]&&(e.loop=t[2]),256&o[0]&&p!==(p=t[8]?"none":"auto")&&s(e,"preload",p),8&o[0]&&(e.controls=t[3]),2&o[0]&&g!==(g=t[1])&&e[g?"pause":"play"](),256&o[0]&&C(e,"active",!t[8]),2&o[0]&&C(e,"playing",!t[1]),2&o[0]&&C(e,"paused",t[1])},i:c,o:c,d(i){i&&l(e),t[34](null),m=!1,V(f)}}}function U(t){let e,i;return{c(){e=o("img"),this.h()},l(t){e=n(t,"IMG",{class:!0,width:!0,height:!0,src:!0}),this.h()},h(){s(e,"class","embed fill w100pc h-auto"),s(e,"width",t[5]),s(e,"height",t[6]),e.src!==(i=t[8]?W:t[10])&&s(e,"src",i),C(e,"active",!t[8])},m(t,i){r(t,e,i)},p(t,o){32&o[0]&&s(e,"width",t[5]),64&o[0]&&s(e,"height",t[6]),1280&o[0]&&e.src!==(i=t[8]?W:t[10])&&s(e,"src",i),256&o[0]&&C(e,"active",!t[8])},i:c,o:c,d(t){t&&l(e)}}}function D(t){let e,i;return{c(){e=o("div"),i=F(Q),this.h()},l(t){e=n(t,"DIV",{class:!0});var o=a(e);i=N(o,Q),o.forEach(l),this.h()},h(){s(e,"class","fill flex row-center-center")},m(t,o){r(t,e,o),g(e,i)},p:c,i:c,o:c,d(t){t&&l(e)}}}function L(t){let e,i,c,d,u,h,p,v;const w=[D,U,K,G],A=[];var b;return~(i=(b=t)[16]("image")?1:b[16]("video")?2:b[16]("vimeo")?3:-1)&&(c=A[i]=w[i](t)),{c(){e=o("span"),c&&c.c(),d=m(),u=o("canvas"),this.h()},l(t){e=n(t,"SPAN",{class:!0,style:!0});var i=a(e);c&&c.l(i),d=f(i),u=n(i,"CANVAS",{class:!0,width:!0,height:!0}),a(u).forEach(l),i.forEach(l),this.h()},h(){s(u,"class","hidden w100pc h-auto"),s(u,"width",t[5]),s(u,"height",t[6]),s(e,"class",h=Object.values(t[15]).join(" ")),s(e,"style",p=`${t[4]};${t[14]};`)},m(o,n){r(o,e,n),~i&&A[i].m(e,null),g(e,d),g(e,u),t[39](e),v=!0},p(t,i){c&&c.p(t,i),(!v||32&i[0])&&s(u,"width",t[5]),(!v||64&i[0])&&s(u,"height",t[6]),(!v||32768&i[0]&&h!==(h=Object.values(t[15]).join(" ")))&&s(e,"class",h),(!v||16400&i[0]&&p!==(p=`${t[4]};${t[14]};`))&&s(e,"style",p)},i(t){v||($(c),v=!0)},o(t){y(c),v=!1},d(o){o&&l(e),~i&&A[i].d(),t[39](null)}}}let Q=null;const W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function X(){}function _(t,e,i){let o,n,a,l,s,r,{autoplaying:c}=e,{muted:u}=e,{scroller:h}=e,{centroid:m}=e,{eze:f}=e,g=H.browser,{file:$}=e,{autohide:y=!1}=e,{format:A=""}=e,{loop:b=!0}=e,{threshold:x=.75}=e,{orientation:k=null}=e,{paused:j=!0}=e,{root:E}=e,{force:S=!1}=e,{controls:z=!1}=e,{class:C=""}=e,{style:I=""}=e;g&&H.device();let V,F,N=!!y;function R(t,e){t&&e&&(i(21,k=t>=e?"portrait":"landscape"),console.log("[media] notifying orientation",k))}const q=(t,e)=>{var i=e||"/",o=new RegExp(i+"{1,}","g");return t.join(i).replace(o,i)};let O,T=null,Y=null,B=null;let M,P;let G=!1;function K(t,e){if(!g||!y||!G)return;P&&(clearTimeout(P),P=null);const o=(null==M?void 0:M.getBoundingClientRect())||{},n=-window.innerHeight,a=-1*o.y>o.height-n,l=o.y>window.innerHeight-n;i(8,N=a||l),P=setTimeout((t=>{const e=(null==m?void 0:m.id)||"undefined-centroid",n=(null==m?void 0:m.center)||999999999,a=Math.abs(o.y+o.height/2-window.innerHeight/2);y==e&&a!=n&&i(20,m={center:a,id:y}),a<n&&e!=y&&(console.log(`[media] ☯️  new centroid : ${T}/${Y}/${(B||0).toFixed(2)} ${y}`),i(20,m={center:a,id:y})),s&&i(1,j=m.id!=y||!c)}),20)}d((async t=>{G=!0,setTimeout((t=>{K()}),100)}));let U=!1,D=!1;return t.$$set=t=>{i(19,e=v(v({},e),w(t))),"autoplaying"in t&&i(0,c=t.autoplaying),"muted"in t&&i(22,u=t.muted),"scroller"in t&&i(23,h=t.scroller),"centroid"in t&&i(20,m=t.centroid),"eze"in t&&i(24,f=t.eze),"file"in t&&i(25,$=t.file),"autohide"in t&&i(26,y=t.autohide),"format"in t&&i(27,A=t.format),"loop"in t&&i(2,b=t.loop),"threshold"in t&&i(28,x=t.threshold),"orientation"in t&&i(21,k=t.orientation),"paused"in t&&i(1,j=t.paused),"root"in t&&i(29,E=t.root),"force"in t&&i(30,S=t.force),"controls"in t&&i(3,z=t.controls),"class"in t&&i(31,C=t.class),"style"in t&&i(4,I=t.style)},t.$$.update=()=>{var e,d;4194304&t.$$.dirty[0]&&i(13,o=!u),268435584&t.$$.dirty[0]&&R(B,x),33554432&t.$$.dirty[0]&&async function(t){var e;if(!t)return;let{id:o,location:n}=t,{ext:a,name:l}=(null==t?void 0:t.item)||{};if(i(7,B=null==(e=null==t?void 0:t.item)?void 0:e.ratio),a=a?"."+a:a,console.log("[media] syncing file",n,o,A),o&&n&&a&&l){E||console.error("[media] no root is set!");let e=A;if(i(5,T=parseInt(e.split("x")[0])),i(6,Y=parseInt(e.split("x")[1])),0==T?i(5,T=Y/B):0==Y?i(6,Y=T*B):isNaN(T)||isNaN(Y)?(i(5,T=t.item.width),i(6,Y=t.item.height)):i(7,B=1),R(B,x),(null==e?void 0:e.length)>0&&(e="."+e),(null==f?void 0:f.api)&&""!=(null==f?void 0:f.api)&&(null==f?void 0:f.copy)){const t=q([f.project,f.assets,E]),o=q(["/media/",$.location]),n=l+e+a,s=l+a,r=`?copy=${q([t,s])}`,c=`?copy=${q([t,n])}`,d="/"==f.api.substring(f.api.length-1)?f.api.substring(0,f.api.length-1):f.api;i(9,V=d+q([o,s+r])),i(10,F=d+q([o,n+c])),S&&(await fetch(V),await fetch(F)),console.log("[media] pinging API to copy file:",l)}else i(9,V=q([E,l+a])),i(10,F=q([E,l+e+a]));console.log("[media] formatted to:"),console.log(`[media] video thumbnail: ${V}`),console.log(`[media] thumb thumbnail: ${V}`)}else console.error("[media] media file is missing id location ext name:",{id:o,location:n,ext:a,name:l},t),console.error("[media] media file:",t)}($),33554432&t.$$.dirty[0]&&i(32,n=function(t){var e;if(!(null==(e=null==$?void 0:$.item)?void 0:e.vibrant))return{};let i={};for(const[o,n]of Object.entries($.item.vibrant))i[o.toLowerCase()]=`rgb(${n.rgb.join(",")})`;return i}()),1&t.$$.dirty[0]&&(d=c,(null==m?void 0:m.id)==y&&s&&i(1,j=!d)),2&t.$$.dirty[0]&&(j||G||i(1,j=!0)),9437184&t.$$.dirty[0]&&K(),2&t.$$.dirty[1]&&i(33,a=(null==n?void 0:n.vibrant)||"var(--color)"),4&t.$$.dirty[1]&&i(14,l=`background-image: linear-gradient(to top left, transparent 0%, transparent calc(50% - var(--stroke-width)), ${a} 50%, transparent calc(50% + var(--stroke-width)), transparent 100%), linear-gradient(to top right, transparent 0%, transparent calc(50% - var(--stroke-width)), ${a} 50%, transparent calc(50% + var(--stroke-width)), transparent 100%);box-shadow:inset 0px 0px 0px 1px ${a}`),68157441&t.$$.dirty[0]&&c&&(null==m||m.id),35651808&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(15,r={mime:"media-mime-"+H.slugify(((null==(e=null==$?void 0:$.item)?void 0:e.mime)||"").split("/")[0]),width:"media-width-"+T,height:"media-height-"+Y,ratio:"media-ratio-"+B,orientation:"media-orientation-"+k,misc:"media block rel w100pc "+C})},s=!0,e=w(e),[c,j,b,z,I,T,Y,B,N,V,F,O,M,o,l,r,t=>H.isFileType(t,$),function(t){t.target.requestFullScreen?t.target.requestFullScreen():t.target.mozRequestFullScreen?t.target.mozRequestFullScreen():t.target.webkitRequestFullScreen?t.target.webkitRequestFullScreen():i(0,c=!c)},function(t,e){const n=document.fullscreenElement==t.target;n&&(U=o,D=j,i(0,c=!0)),!o&&n&&i(13,o=!0),j&&n&&i(1,j=!1),n||(i(13,o=U),i(1,j=D))},e,m,k,u,h,f,$,y,A,x,E,S,C,n,a,function(t){p[t?"unshift":"push"]((()=>{O=t,i(11,O)}))},function(){j=this.paused,i(1,j)},function(t){T=t,i(5,T)},function(t){Y=t,i(6,Y)},function(t){B=t,i(7,B)},function(t){p[t?"unshift":"push"]((()=>{M=t,i(12,M)}))}]}class J extends t{constructor(t){super(),e(this,t,_,L,i,{autoplaying:0,muted:22,scroller:23,centroid:20,eze:24,file:25,autohide:26,format:27,loop:2,threshold:28,orientation:21,paused:1,root:29,force:30,controls:3,class:31,style:4},[-1,-1])}}function Z(t){let e,i;return e=new J({props:{class:t[3],style:`background-color: ${t[5]}!important;color:${t[5]};`+t[4],format:t[0],file:t[1],root:t[2],eze:t[6],autoplaying:t[7],muted:t[8]}}),{c(){b(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,o){k(e,t,o),i=!0},p(t,[i]){const o={};8&i&&(o.class=t[3]),48&i&&(o.style=`background-color: ${t[5]}!important;color:${t[5]};`+t[4]),1&i&&(o.format=t[0]),2&i&&(o.file=t[1]),4&i&&(o.root=t[2]),64&i&&(o.eze=t[6]),128&i&&(o.autoplaying=t[7]),256&i&&(o.muted=t[8]),e.$set(o)},i(t){i||($(e.$$.fragment,t),i=!0)},o(t){y(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function tt(t,e,i){let o,n,a,l;R(t,q,(t=>i(6,n=t))),R(t,O,(t=>i(7,a=t))),R(t,T,(t=>i(8,l=t)));let{format:s}=e,{file:r}=e,{root:c}=e,{class:d=""}=e,{style:u=""}=e;return t.$$set=t=>{"format"in t&&i(0,s=t.format),"file"in t&&i(1,r=t.file),"root"in t&&i(2,c=t.root),"class"in t&&i(3,d=t.class),"style"in t&&i(4,u=t.style)},t.$$.update=()=>{var e,n;2&t.$$.dirty&&i(5,o=((null==(n=null==(e=null==r?void 0:r.item)?void 0:e.meta)?void 0:n.colours)||[])[0])},[s,r,c,d,u,o,n,a,l]}class et extends t{constructor(t){super(),e(this,t,tt,Z,i,{format:0,file:1,root:2,class:3,style:4})}}export{et as E};
